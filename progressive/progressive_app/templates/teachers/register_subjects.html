{% extends 'base.html' %}
{% block title %}Register Teaching Subjects{% endblock %}
{% block content %}
<div class="container">
  <h3><i class="bi bi-journal-bookmark"></i> Register Teaching Subjects</h3>
  <form method="post">{% csrf_token %}
    <div class="mb-3">
      <label>Subject</label>
      <select name="subject" class="form-select" required>
        <option value="">Select Subject</option>
        {% for s in subjects %}
        <option value="{{ s.id }}">{{ s.name }} ({{ s.course.name }})</option>
        {% endfor %}
      </select>
    </div>
    <div class="mb-3">
      <label>Class</label>
      <select name="school_class" class="form-select" required>
        <option value="">Select Class</option>
        {% for c in classes %}
        <option value="{{ c.id }}">{{ c.name }}</option>
        {% endfor %}
      </select>
    </div>
    <button class="btn btn-success">Register</button>
  </form>

  <h5 class="mt-4">Already Registered</h5>
  <ul class="list-group">
    {% for ts in registered %}
    <li class="list-group-item d-flex justify-content-between align-items-center">
      {{ ts.subject.name }} â€” {{ ts.school_class.name }}
      <form method="post" action="{% url 'progressive_app:delete_teacher_subject' ts.id %}">
        {% csrf_token %}
        <button type="submit" class="btn btn-sm btn-danger">
          <i class="bi bi-trash"></i> Delete
        </button>
      </form>
    </li>
    {% empty %}
    <li class="list-group-item">No subjects registered yet.</li>
    {% endfor %}
  </ul>
</div>
{% endblock %}
